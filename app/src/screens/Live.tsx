import React, { useEffect, useState } from 'react'; import { View, Text, FlatList, RefreshControl } from 'react-native'; import { fetchLive } from '../api'; import Card from '../components/Card'; import Logo from '../components/Logo'; import Header from '../components/Header'; import { theme } from '../theme'; export default function Live(){ const [items,setItems]=useState<any[]>([]); const [loading,setLoading]=useState(true); const load = async()=>{ setLoading(true); try{ setItems((await fetchLive())||[]);} finally{ setLoading(false);} }; useEffect(()=>{ load(); const id=setInterval(load, 20000); return ()=> clearInterval(id); },[]); const t=theme.dark; return (<View style={{ flex:1, backgroundColor:t.bg, padding:16 }}><Header title='Canlı'/><FlatList data={items} keyExtractor={(x)=> String(x.fixtureId)} refreshControl={<RefreshControl refreshing={loading} onRefresh={load}/>} renderItem={({item})=> (<Card><View style={{ flexDirection:'row', alignItems:'center' }}><Logo uri={item.logos?.home}/><Text style={{ color:t.text, fontWeight:'800' }}>{item.home}</Text><Text style={{ color:t.text, marginHorizontal:8 }}> {item.score} </Text><Text style={{ color:t.text, fontWeight:'800' }}>{item.away}</Text><Text style={{ color:'#34d399', marginLeft:8 }}>● {item.elapsed}'</Text></View></Card>)}/></View>); }